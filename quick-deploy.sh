#!/bin/bash

# OHP - –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ v16.0
# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–ø–ª–æ—è

echo "üöÄ OHP - –ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ v16.0"
echo "=================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
if [ ! -f "package.json" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

echo "‚úÖ –ü—Ä–æ–µ–∫—Ç –Ω–∞–π–¥–µ–Ω"

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
npm install

# –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üî® –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
if [ ! -d "dist" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –°–±–æ—Ä–∫–∞ –Ω–µ —É–¥–∞–ª–∞—Å—å"
    exit 1
fi

echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"
echo "üìÅ –§–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ dist/"

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä —Å–±–æ—Ä–∫–∏
echo "üìä –†–∞–∑–º–µ—Ä —Å–±–æ—Ä–∫–∏:"
du -sh dist/

echo ""
echo "üéØ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!"
echo ""
echo "–í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è:"
echo "1. Vercel: https://vercel.com/dashboard"
echo "2. GitHub Pages: https://github.com/TheHuman808/ohp/settings/pages"
echo "3. Netlify: https://app.netlify.com/"
echo ""
echo "üìù –í–µ—Ä—Å–∏—è: v16.0"
echo "üìÖ –î–∞—Ç–∞: $(date)"
echo "üîë –ö–æ–º–º–∏—Ç: $(git rev-parse --short HEAD)"
